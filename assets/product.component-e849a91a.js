import{g as k}from"./categories.service-6e43209f.js";import{_ as x,f as p,r as n,o as c,c as l,b as o,a as i,h as C,w as I,t as m,e as U,j as _,F as A,d as L}from"./index-857593b0.js";import P from"./404.component-f9b77a45.js";const B={components:{notFoundComponent:P},data(){return{categories:[],selectedImageSrc:"/images/product-images/default.png",selectedImage:0,userInfo:null,isUserLogged:!1}},props:{product:{required:!0}},methods:{getUserInfo(e){e!=null&&e?(this.userInfo=e,this.isUserLogged||(this.isUserLogged=!0)):this.isUserLogged&&(this.isUserLogged=!1)},updateUserProductAmount(){this.userInfo.shop.cart[this.product.id].amount=this.product.amount,p.methods.updateCartInformation(this.userInfo)},changeAmount(e){this.isUserLogged?(this.userInfo.shop.cart?this.userInfo.shop.cart[this.product.id]?this.product.stock>=e&&(this.product.amount=e):(this.userInfo.shop.cart[this.product.id]={unitPrice:this.product.price,amount:e},this.product.amount=e):(this.userInfo.shop.cart={},this.userInfo.shop.cart[this.product.id]={unitPrice:this.product.price,amount:e},this.product.amount=e),this.updateUserProductAmount()):this.$emit("login")},buy(){this.changeAmount(this.product.amount+1),this.isUserLogged&&this.$emit("cart")}},created(){k().then(e=>{this.categories=e}),this.userInfo=p.methods.watchUser(this.getUserInfo),this.isUserLogged=!!this.userInfo},watch:{"product.amount"(e,s){e===null||e===""?(this.product.amount=0,this.updateUserProductAmount()):e>this.product.stock&&(this.product.amount=this.product.stock,this.updateUserProductAmount())}}},F={key:0},S={class:"flex flex-row align-center"},z={class:"flex flex-col width-auto"},N={class:"flex-row gap-2 width-auto"},w={class:"flex flex-col width-auto align-left margin-3-width"},D={class:"margin-2-height"},j={class:"text-4"},q={class:"text-8"},E={class:"text-8"},M={class:"margin-3-height"},Q=o("div",{id:"link"},"Se puede comprar un mÃ¡ximo de 20 unidades",-1),G={key:0,class:"align-center margin-1-height text-4"},H={class:"flex gap-1 margin-1-height"},J={key:2},K={class:"content-margin align-center"},O=o("div",{class:"text-4 margin-1"},"Cargando producto...",-1);function R(e,s,t,T,a,d){const h=n("pv-image"),f=n("pv-scroll-panel"),u=n("pv-button"),v=n("pv-input-number"),y=n("not-found-component"),b=n("pv-progress-bar");return t.product&&a.categories.length!==0?(c(),l("div",F,[o("div",S,[o("div",z,[i(h,{src:`/images/product-images/${t.product.id}/${this.product.image[this.selectedImage]}`,alt:"Main Picture",class:C(a.categories[t.product.category].name==="Lectura"?"main-manga":"main-image"),preview:""},null,8,["src","class"]),i(f,{class:"subimages-container"},{default:I(()=>[o("p",N,[(c(!0),l(A,null,L(t.product.image,(r,g)=>(c(),_(h,{src:`/images/product-images/${t.product.id}/${t.product.image[g]}`,alt:"Pictures",onClick:W=>a.selectedImage=g,class:"product-images"},null,8,["src","onClick"]))),256))])]),_:1})]),o("div",w,[o("div",null,[o("div",D,[o("div",j,m(a.categories[t.product.category].subcategory[t.product.subcategory].franchise[t.product.franchise].name),1),o("div",q,m(t.product.name),1)]),o("div",E,"S/. "+m(t.product.price.toFixed(2)),1)]),o("div",M,[o("div",null,[o("div",null,m(t.product.stock)+" Unidades Disponibles",1),Q,t.product.amount?(c(),l("div",G,[i(u,{icon:this.product.amount>1?"pi pi-minus":"pi pi-trash",severity:"secondary",rounded:"",outlined:"","aria-label":"Quit one",onClick:s[0]||(s[0]=r=>d.changeAmount(this.product.amount+-1))},null,8,["icon"]),i(v,{"aria-label":"Product Amount",modelValue:t.product.amount,"onUpdate:modelValue":s[1]||(s[1]=r=>t.product.amount=r),class:"small-input",min:1,max:t.product.stock,onChange:e.onProductAmountChange},null,8,["modelValue","max","onChange"]),i(u,{icon:"pi pi-plus",severity:"secondary",rounded:"",outlined:"","aria-label":"Add one",onClick:s[2]||(s[2]=r=>d.changeAmount(this.product.amount+1)),disabled:t.product.amount>=t.product.stock},null,8,["disabled"])])):U("",!0),o("div",H,[i(u,{class:"myButton",label:"Comprar",size:"large",severity:"secondary",rounded:"",onClick:d.buy},null,8,["onClick"]),i(u,{class:"myButton",label:"Agregar al Carrito",size:"large",severity:"secondary",outlined:"",rounded:"",onClick:s[3]||(s[3]=r=>d.changeAmount(this.product.amount+1)),disabled:t.product.amount>=t.product.stock},null,8,["disabled"])])])])])])])):t.product?(c(),l("div",J,[o("div",K,[O,i(b,{style:{width:"24rem"},mode:"indeterminate"})])])):(c(),_(y,{key:1}))}const V=x(B,[["render",R]]);export{V as default};
