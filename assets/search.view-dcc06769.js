import{p as x,l as v}from"./product-group.component-552bc087.js";import{g as P}from"./categories.service-32ccc348.js";import{_ as b,i as r,r as n,o as m,c as C,b as t,l as w,a as g,n as F,w as u,j as k,t as f}from"./index-4ca67c65.js";const S={components:{productGroupComponent:x,loadingComponent:v},props:{searchLabel:{required:!1,default:r,type:String}},data(){return{showFilters:!1,categories:null,categoriesSelector:null,selectedFilter:"",categoriesToPass:{category:r,subcategory:r,franchise:r},prices:{selectedRange:[0,100],edges:{min:0,max:100},toProductPrinterClient:{min:0,max:100}}}},methods:{getMinMax(e){this.prices.edges=e,this.toProductPrinterClient=e},getCategoriesData(){P().then(e=>{this.categories=e,this.categoriesSelector=[];for(let i in e){let o=e[i],h={key:`${o.id}`,label:o.name,data:{category:o.id,subcategory:r,franchise:r},children:[]};for(let s in e[i].subcategory){let c=e[i].subcategory[s],d={key:`${o.id}-${c.id}`,label:c.name,data:{category:o.id,subcategory:c.id,franchise:r},children:[]};for(let p in e[i].subcategory[s].franchise){let l=e[i].subcategory[s].franchise[p],_={key:`${o.id}-${c.id}-${l.id}`,label:l.name,data:{category:o.id,subcategory:c.id,franchise:l.id}};d.children.push(_)}h.children.push(d)}this.categoriesSelector.push(h)}})},showProduct(e){this.$emit("product",e)}},created(){this.getCategoriesData()},watch:{selectedFilter:{handler(e,i){for(e in e)break;let o=e.split("-");this.categoriesToPass={category:o.length>0?o[0]:r,subcategory:o.length>1?o[1]:r,franchise:o.length>2?o[2]:r}}},"prices.selectedRange":{handler(e,i){e={min:e[0]<e[1]?e[0]:e[1],max:e[0]>e[1]?e[0]:e[1]},this.prices.toProductPrinterClient={min:(e.min-0)*(this.prices.edges.max-this.prices.edges.min)/(100-0)+this.prices.edges.min,max:(e.max-0)*(this.prices.edges.max-this.prices.edges.min)/(100-0)+this.prices.edges.min}},deep:!0},"prices.edges":{handler(e,i){this.prices.toProductPrinterClient={min:e.min,max:e.max}},deep:!0}}},V={key:0,class:"flex flex-col"},j={class:"flex flex-justify-content width-full"},T=t("i",{class:"pi pi-bars"},null,-1),B=t("div",{class:"text-4"},"Resultados de la Búsqueda",-1),M=t("div",null,null,-1),R=t("div",{class:"margin-2"},null,-1),D={class:"flex-row flex-justify-content"},L=t("div",{class:"floating"},null,-1),G={class:"floating"},I={class:"margin-1 flex flex-justify-content"},N=t("div",null,null,-1),q=t("div",{class:"text-6"},"Filtros:",-1),U={class:"margin-1-width"},z={class:"margin-0"},E=t("div",{class:"text-4"},"Categoría:",-1),X={class:"margin-1-width"},A={class:"margin-0"},H=t("div",{class:"text-4"},"Precio:",-1),J={class:"flex-row flex-justify-content margin-0"},K={class:"margin-1-width"};function O(e,i,o,h,s,c){const d=n("productGroupComponent"),p=n("pv-tree-select"),l=n("pv-slider"),_=n("pv-card"),y=n("loading-component");return s.categories?(m(),C("div",V,[t("div",j,[t("div",{onClick:i[0]||(i[0]=a=>s.showFilters=!0)},[T,w(" Mostrar filtros")]),B,M]),R,t("div",D,[L,g(d,{categories:s.categories,"search-label":o.searchLabel,pricesLimit:s.prices.toProductPrinterClient,category:s.categoriesToPass.category,subcategory:s.categoriesToPass.subcategory,franchise:s.categoriesToPass.franchise,rows:10,onProduct:c.showProduct,onPrices:c.getMinMax},null,8,["categories","search-label","pricesLimit","category","subcategory","franchise","onProduct","onPrices"]),t("div",G,[t("div",{style:F(s.showFilters?"display: block;":"display: none;")},[g(_,null,{title:u(()=>[t("div",I,[N,q,t("div",{onClick:i[1]||(i[1]=a=>s.showFilters=!1)},"X")])]),content:u(()=>[t("div",U,[t("div",z,[E,t("div",X,[g(p,{modelValue:s.selectedFilter,"onUpdate:modelValue":i[2]||(i[2]=a=>s.selectedFilter=a),options:s.categoriesSelector,placeholder:"elige la categoria"},null,8,["modelValue","options"])])]),t("div",A,[H,t("div",J,[t("div",null,"S/. "+f(s.prices.toProductPrinterClient.min.toFixed(2)),1),t("div",null,"S/. "+f(s.prices.toProductPrinterClient.max.toFixed(2)),1)]),t("div",K,[g(l,{modelValue:s.prices.selectedRange,"onUpdate:modelValue":i[3]||(i[3]=a=>s.prices.selectedRange=a),range:"",class:"slider"},null,8,["modelValue"])])])])]),_:1})],4)])])])):(m(),k(y,{key:1,text:"Cargando datos..."}))}const Z=b(S,[["render",O]]);export{Z as default};
